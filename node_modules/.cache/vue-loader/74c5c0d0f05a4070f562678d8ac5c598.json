{"remainingRequest":"/Users/nyg/Work/NayDev/KST_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nyg/Work/NayDev/KST_web/src/components/Catalogos/Selects/TiposCicloEscolar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nyg/Work/NayDev/KST_web/src/components/Catalogos/Selects/TiposCicloEscolar.vue","mtime":1657484031546},{"path":"/Users/nyg/Work/NayDev/KST_web/node_modules/cache-loader/dist/cjs.js","mtime":1657481261281},{"path":"/Users/nyg/Work/NayDev/KST_web/node_modules/babel-loader/lib/index.js","mtime":1657481269361},{"path":"/Users/nyg/Work/NayDev/KST_web/node_modules/cache-loader/dist/cjs.js","mtime":1657481261281},{"path":"/Users/nyg/Work/NayDev/KST_web/node_modules/vue-loader/lib/index.js","mtime":1657481273148}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZUFQSSBmcm9tICJAL2pzL2FwaSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZW1pdHM6IFsnc2VsZWNjaW9uYXJDaWNsb0VzY29sYXInXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsb3I6ICItMSIsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGl0ZW1zOiBbXSwKICAgIH07CiAgfSwKICBwcm9wczogewogICAgbGFiZWw6IFN0cmluZywKICAgIGZ1bmNpb246IFN0cmluZywKICAgIHRpcG9EZUNpY2xvRXNjb2xhcklkOiBOdW1iZXIsCiAgICB0aXR1bG86IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IHRydWUgfSwKICAgIGRpc2FibGVkOiBCb29sZWFuLAogICAgYWN0dWFsOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFRpcG9zRGVDaWNsb0VzY29sYXIoKTsKCiAgICBpZiAodGhpcy4kcHJvcHMudGlwb0RlQ2ljbG9Fc2NvbGFySWQgPiAwKQogICAgICB0aGlzLnZhbG9yID0gdGhpcy4kcHJvcHMudGlwb0RlQ2ljbG9Fc2NvbGFySWQ7ICAgIAogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFRpcG9zRGVDaWNsb0VzY29sYXIoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwoKICAgICAgICBjb25zdCBmaWx0cm9zID0gewogICAgICAgICAgZmlsdHJvOiB7CiAgICAgICAgICAgIGFjdGl2bzogMSwKICAgICAgICAgIH0sCiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgcm91dGVBUEkgKyAiYWRtaW5pc3RyYWNpb24vdGlwb3NEZUNpY2xvRXNjb2xhckNhdGFsb2dvIiwKICAgICAgICAgIGZpbHRyb3MKICAgICAgICApOwogICAgICAgIGlmICghcmVzcG9uc2UuZGF0YS5oYXlFcnJvcil7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZXNwb25zZS5sZW5ndGggPiAwKXsKICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKHsKICAgICAgICAgICAgVGlwb0RlQ2ljbG9Fc2NvbGFySWQ6IGVsZW1lbnRbIjAwMlRpcG9EZUNpY2xvRXNjb2xhcklkIl0sCiAgICAgICAgICAgIEHDsW9EZUluaWNpbzogZWxlbWVudFsiMDAyQcOxb0RlSW5pY2lvIl0sCiAgICAgICAgICAgIEHDsW9EZVRlcm1pbm86IGVsZW1lbnRbIjAwMkHDsW9EZVRlcm1pbm8iXSwKICAgICAgICAgICAgQWN0aXZvOiBlbGVtZW50WyIwMDJBY3Rpdm8iXSwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfWVsc2V7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIHRoaXMuJGFsZXJ0KAogICAgICAgICAgIk5vIHNlIHB1ZG8gb2J0ZW5lciBpbmZvcm1hY2nDs24sIGZhdm9yIGRlIHZvbHZlcmxvIGEgaW50ZW50YXIuIgogICAgICAgICk7IAogICAgICB9CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAodGhpcy4kcHJvcHMuYWN0dWFsID4gMCkKICAgICAgICAgIHRoaXMuc2VsZWNjaW9uYXJBY3R1YWwoKTsKCiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY2Npb25hcjogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudmFsb3IgPiAwID8gdGhpcy4kZW1pdCh0aGlzLiRwcm9wcy5mdW5jaW9uLCB0aGlzLnZhbG9yKSA6IHRoaXMuJGVtaXQodGhpcy4kcHJvcHMuZnVuY2lvbiwgbnVsbCk7CiAgICB9LAogICAgc2VsZWNjaW9uYXJBY3R1YWw6IGZ1bmN0aW9uKCl7CiAgICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7ICAgICAgCiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiBpLkHDsW9EZUluaWNpbyA9PSB5ZWFyIHx8IGkuQcOxb0RlVGVybWlubyA9PSB5ZWFyKTsKICAgICAgdGhpcy52YWxvciA9IG9wdGlvbnNbb3B0aW9ucy5sZW5ndGggLSAxXS5UaXBvRGVDaWNsb0VzY29sYXJJZDsgICAgIAogICAgICAKICAgICAgdGhpcy5zZWxlY2Npb25hcigpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["TiposCicloEscolar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TiposCicloEscolar.vue","sourceRoot":"src/components/Catalogos/Selects","sourcesContent":["<template>\n  <div>\n    <div class=\"col-12\">\n      <label v-if=\"titulo\" class=\"activo_label\">{{ label }}</label>\n      <select\n        class=\"form-control\"\n        v-model=\"valor\"\n        @change=\"seleccionar()\"\n        :disabled=\"disabled\"\n      >\n        <option value=\"-1\">Seleccionar Ciclo Escolar</option>\n        <option\n          v-for=\"(element, index) in items\"\n          :key=\"index\"\n          :value=\"element['TipoDeCicloEscolarId']\"\n          >{{ element[\"AñoDeInicio\"] }} - {{ element[\"AñoDeTermino\"] }}</option\n        >\n      </select>\n    </div>\n    <cargando v-if=\"isLoading\"></cargando>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport routeAPI from \"@/js/api\";\n\nexport default {\n  emits: ['seleccionarCicloEscolar'],\n  data() {\n    return {\n      valor: \"-1\",\n      isLoading: false,\n      items: [],\n    };\n  },\n  props: {\n    label: String,\n    funcion: String,\n    tipoDeCicloEscolarId: Number,\n    titulo: { type: Boolean, required: true, default: true },\n    disabled: Boolean,\n    actual: { type: Boolean, default: false }\n  },\n  created() {\n    this.getTiposDeCicloEscolar();\n\n    if (this.$props.tipoDeCicloEscolarId > 0)\n      this.valor = this.$props.tipoDeCicloEscolarId;    \n  },\n  computed: {},\n  methods: {\n    async getTiposDeCicloEscolar() {\n      try {\n        this.isLoading = true;\n\n        const filtros = {\n          filtro: {\n            activo: 1,\n          },\n        };\n\n        const response = await axios.post(\n          routeAPI + \"administracion/tiposDeCicloEscolarCatalogo\",\n          filtros\n        );\n        if (!response.data.hayError){\n          if (response.data.response.length > 0){\n          response.data.response.forEach((element) => {\n          this.items.push({\n            TipoDeCicloEscolarId: element[\"002TipoDeCicloEscolarId\"],\n            AñoDeInicio: element[\"002AñoDeInicio\"],\n            AñoDeTermino: element[\"002AñoDeTermino\"],\n            Activo: element[\"002Activo\"],\n          });\n        });\n        }\n      }else{\n        console.log(response);\n        this.$alert(\n          \"No se pudo obtener información, favor de volverlo a intentar.\"\n        ); \n      }\n        this.isLoading = false;\n        if (this.$props.actual > 0)\n          this.seleccionarActual();\n\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    seleccionar: function() {\n      this.valor > 0 ? this.$emit(this.$props.funcion, this.valor) : this.$emit(this.$props.funcion, null);\n    },\n    seleccionarActual: function(){\n      const year = new Date().getFullYear();      \n      var options = this.items.filter(i => i.AñoDeInicio == year || i.AñoDeTermino == year);\n      this.valor = options[options.length - 1].TipoDeCicloEscolarId;     \n      \n      this.seleccionar();\n    }\n  },\n};\n</script>\n"]}]}